# Задание 06 (Очереди сообщений System V)

## Условие

Написать две программы, использующие одну очередь сообщений для взаимодействия множества процессов (групповой чат).

Первая программа – сервер, создает очередь сообщений, принимает сообщения от клиентов и пересылает их другим клиентам.

Вторая программа – клиент, подключается к очереди и отправляет сообщения серверу, а также выбирает из очереди сообщения, адресованные клиенту. Может быть запущено сразу несколько экземпляров клиентов.

Для идентификации получателя используется приоритет: 10 - сервер, 20, 30, 40, ... - другие клиенты. Номер клиента указывается в его аргументах запуска.

В исходящих сообщениях указывается номер отправителя (приоритет) и сам текст сообщения. Сервер ведет учет подключенных клиентов. Если клиент прислал сообщение `shutdown`, сервер перестает пересылать сообщения этому клиенту.

## Сборка

### Библиотека для IPC

```shell
make lib
```

### Сервер

```shell
make server
```

### Клиент

```shell
make client
```

## Запуск

### Сервер

`./server`

```shell
./server
```

> Для корректного завершения необходимо отправить сигнал `SIGINT`

### Клиент

`./client CLIENT_ID`

```shell
./client 20
```

> По умолчанию сообщение отправляется всем клиентам (broadcast), для отправки приватного сообщения необходимо в любую часть сообщения вставить: `:{CLIENT_ID}`

```
:20hello, 20
```

> Для корректного завершения необходимо отправить сообщение `shutdown`
